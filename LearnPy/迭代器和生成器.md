[TOC]

## 迭代器和生成器

#### 迭代器

##### for循环的原理

迭代器协议

```python
list = [1,2,3]
for i in list:#1.执行list__iter__()将列表变成一个可迭代对象2. 执行list.__iter__().__next__()3,捕获到StopValues：异常时for循环停止
    print(i)
```

#### 生成器

生成器就是自动实现了\__iter__的可迭代对象

##### 生成器函数

生成器函数是内部直接完成生成器协议的函数，与普通函数不同的是普通函数用return返回数值，而生成器用yield返回数值 ，且函数内有可以有多个yield

```python
def test():
    yield    
```

yield 可以保留函数的运行状态

eg.

```python
def product_eggs():
    for i in range(100):
        yield '鸡蛋%s',%i
res_pregg = product_egg()
for egg in res_pregg:
    print(egg)
res_pregg.__next__()#
```



##### 生成器表达式

######  三元表达式

```python
name = 'HelloKity'
res = 'cat' if name == 'HelloKity' else 'dog'
print(res)#res = cat
```

###### 列表解析

```python
list = []
for i in range(10):
    list.append(i)
print(list)
#下面的代码和上面的代码作用一样
l = ['鸡蛋%s' %i for i in range(10)]#列表解析式
print(l)#直接是列表
laomuji = ('鸡蛋%s' %i for i in range(10))#生成式
print（laomuji）#一个生成式对象
print(laomuji.__next__())
print(next(laomuji))#把生成器中的数值读出来

```

#### 生产者消费者模型





